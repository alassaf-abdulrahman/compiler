<!DOCTYPE html>
<html>
<head>
    <title>Smart Home Parser</title>
    <style>
        body {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
            font-family: Arial, sans-serif;
        }
        #input {
            width: 100%;
            height: 200px;
            font-family: monospace;
            margin-bottom: 10px;
            padding: 10px;
        }
        #output {
            width: 100%;
            height: 200px;
            background: #f5f5f5;
            border: 1px solid #ddd;
            font-family: monospace;
            padding: 10px;
            overflow: auto;
        }
    </style>
</head>
<body>
    <h1>Smart Home Parser</h1>
    <textarea id="input">IF DOOR IS OPENED {
    TURNON LIGHT AT 1430
}</textarea>
    <button onclick="parse()">Parse</button>
    <div id="output"></div>

    <!-- Include ANTLR and generated lexer/parser -->
    <script type="module" src="YourLanguageLexer.js"></script>
    <script type="module" src="YourLanguageParser.js"></script>

    <script>
        import antlr4 from '../node_modules/antlr4/src/antlr4/index';
        function parse() {
            try {
                // Get input from the textarea
                const input = document.getElementById('input').value;

                // Create an ANTLR input stream from the input
                const chars = new antlr4.InputStream(input);

                // Initialize the lexer
                const lexer = new YourLanguageLexer(chars);

                // Create a token stream from the lexer
                const tokens = new antlr4.CommonTokenStream(lexer);

                // Initialize the parser
                const parser = new YourLanguageParser(tokens);

                // Parse the input starting from the root rule (e.g., 'program')
                const tree = parser.program();

                // Display the parse tree in the output div
                const output = document.getElementById('output');
                output.innerHTML = `<pre>${tree.toStringTree(parser.ruleNames)}</pre>`;
            } catch (e) {
                // Display any errors in the output div
                document.getElementById('output').innerHTML = `<div style="color: red">Error: ${e.message}</div>`;
                console.error(e);
            }
        }
    </script>
</body>
</html>